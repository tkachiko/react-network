(this["webpackJsonpsocial-network"]=this["webpackJsonpsocial-network"]||[]).push([[3],{254:function(e,a,s){e.exports={name:"Dialogs_name__2pejV",dialogs:"Dialogs_dialogs__2xRSA",dialogsBlockWrapper:"Dialogs_dialogsBlockWrapper__3QZUO",dialogsItemsWrapper:"Dialogs_dialogsItemsWrapper__3oo0j",dialogsItems:"Dialogs_dialogsItems__2sNe2",messagesHeading:"Dialogs_messagesHeading__2vKO_",messages:"Dialogs_messages__1w_Up",messagesList:"Dialogs_messagesList__3P5tp",inputBlock:"Dialogs_inputBlock__3kctr",textarea:"Dialogs_textarea__PRKXN",textareaBlock:"Dialogs_textareaBlock__1a5m7",buttonWrapper:"Dialogs_buttonWrapper__3oK89"}},255:function(e,a,s){e.exports={dialogItem:"DialogItem_dialogItem__2RuWv",dialogLink:"DialogItem_dialogLink__1DOpS",active:"DialogItem_active__2qnc5"}},256:function(e,a,s){e.exports={message:"Message_message__1MOXo",myMessage:"Message_myMessage__6CULW",companionMessage:"Message_companionMessage__2QtC4"}},258:function(e,a,s){"use strict";s.r(a);var i=s(12),t=s(59),n=s(14),c=s(28),o=s(110),l=s(11),g=s(111),r=s(16),d=s(254),m=s.n(d),u=s(0),j=function(e){var a=e.sendMessage,s=e.activeDialogId;return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(r.c,{initialValues:{message:""},onSubmit:function(e,i){var t=i.setSubmitting,n=i.resetForm;a(e.message,s),n({values:"",activeDialogId:s}),t(!1)},children:function(e){var a=e.values,s=e.handleChange,i=e.handleSubmit;return Object(u.jsx)(r.b,{onKeyDown:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),i())},children:Object(u.jsxs)("div",{className:m.a.textareaBlock,children:[Object(u.jsx)("textarea",{name:"message",onChange:s,value:a.message,placeholder:"Enter your message",className:m.a.textarea}),Object(u.jsx)("div",{className:m.a.buttonWrapper,children:Object(u.jsx)("input",{onSubmit:i,onKeyDown:onkeydown,type:"submit",value:"Send"})})]})})}})})},b=s(58),_=s(20),h=s(29),p=s.n(h),v=s(255),O=s.n(v),x=function(e){var a=e.id,s=e.name,i=e.activeDialogId;return Object(u.jsx)(_.b,{to:"/dialogs/".concat(a),className:p()(O.a.dialogLink,Object(b.a)({},O.a.active,i===a)),activeClassName:O.a.active,children:Object(u.jsx)("div",{className:O.a.dialogItem,children:s})})},f=s(256),D=s.n(f),I=s(49),N=function(e){var a=e.message,s=e.author,i=e.photoMe;return Object(u.jsx)("div",{className:D.a.message,children:0===s.id?Object(u.jsxs)("div",{className:D.a.myMessage,children:[Object(u.jsx)("span",{children:a}),Object(u.jsx)("img",{src:i||I.a,alt:""})]}):Object(u.jsxs)("div",{className:D.a.companionMessage,children:[Object(u.jsx)("img",{src:I.a,alt:""}),Object(u.jsx)("span",{children:a})]})})},k=function(e){var a=e.dialogs,s=e.messages,i=e.sendMessage,t=e.isAuth,n=e.findCompanion,c=e.activeDialogId,o=e.companionName,g=a.map((function(e){return Object(u.jsx)(x,{name:e.name,id:e.id,activeDialogId:c},e.id)})),r=s.map((function(e){return Object(u.jsx)(N,{message:e.message,id:e.id,author:n(e.authorId)},e.id)}));return t?Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:m.a.dialogs,children:[Object(u.jsx)("div",{className:m.a.dialogsItemsWrapper,children:Object(u.jsx)("div",{className:m.a.dialogsItems,children:g})}),Object(u.jsx)("div",{className:m.a.dialogsBlockWrapper,children:c?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:m.a.messagesHeading,children:[Object(u.jsx)("h4",{children:"Dialog with \xa0"}),Object(u.jsx)("span",{className:m.a.name,children:o})]}),Object(u.jsx)("div",{className:m.a.messagesList,children:r}),Object(u.jsx)("div",{className:m.a.inputBlock,children:Object(u.jsx)(j,{sendMessage:i,activeDialogId:c})})]}):Object(u.jsx)("div",{children:Object(u.jsx)("h4",{children:"Chose the dialog"})})})]})}):Object(u.jsx)(l.a,{to:"/login"})},M=s(1),W=["dialogs","authors","messages","activeDialogId","isAuth","sendMessage","setActiveDialog"];a.default=Object(c.c)(Object(n.b)((function(e){return{dialogs:e.dialogsPage.dialogs,authors:e.dialogsPage.authors,messages:e.dialogsPage.messages,activeDialogId:e.dialogsPage.activeDialogId,isAuth:e.auth.isAuth}}),{sendMessage:g.b,setActiveDialog:g.c}),l.g,o.a)((function(e){var a=e.dialogs,s=e.authors,n=e.messages,c=e.activeDialogId,o=e.isAuth,l=e.sendMessage,g=e.setActiveDialog,r=Object(t.a)(e,W),d=Number.parseInt(r.match.params.dialogId),m=Object(M.useState)(null),j=Object(i.a)(m,2),b=j[0],_=j[1];Object(M.useEffect)((function(){g(d)})),Object(M.useEffect)((function(){_(b||c)}),[b,c]);var h=function(e){return s.find((function(a){return a.id===e}))},p=c&&a.find((function(e){return e.id===c})).companions.map((function(e){return h(e)})).map((function(e){return e.name}))[0];return Object(u.jsx)(k,{dialogs:a,messages:n.filter((function(e){return e.dialogId===c})),activeDialogId:c,companionName:p,findCompanion:h,sendMessage:l,isAuth:o})}))}}]);
//# sourceMappingURL=3.ae23e7c3.chunk.js.map