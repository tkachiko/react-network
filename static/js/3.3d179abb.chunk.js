(this["webpackJsonpsocial-network"]=this["webpackJsonpsocial-network"]||[]).push([[3],{257:function(e,a,s){e.exports={name:"Dialogs_name__2pejV",dialogs:"Dialogs_dialogs__2xRSA",dialogsBlockWrapper:"Dialogs_dialogsBlockWrapper__3QZUO",dialogsItemsWrapper:"Dialogs_dialogsItemsWrapper__3oo0j",dialogsItems:"Dialogs_dialogsItems__2sNe2",messagesHeading:"Dialogs_messagesHeading__2vKO_",messages:"Dialogs_messages__1w_Up",messagesList:"Dialogs_messagesList__3P5tp",inputBlock:"Dialogs_inputBlock__3kctr",textarea:"Dialogs_textarea__PRKXN",textareaBlock:"Dialogs_textareaBlock__1a5m7",buttonWrapper:"Dialogs_buttonWrapper__3oK89"}},258:function(e,a,s){e.exports={dialogItem:"DialogItem_dialogItem__2RuWv",dialogLink:"DialogItem_dialogLink__1DOpS",active:"DialogItem_active__2qnc5"}},259:function(e,a,s){e.exports={message:"Message_message__1MOXo",myMessage:"Message_myMessage__6CULW",companionMessage:"Message_companionMessage__2QtC4"}},261:function(e,a,s){"use strict";s.r(a);var i=s(12),t=s(57),n=s(14),c=s(27),o=s(110),l=s(11),r=s(111),g=s(16),d=s(257),m=s.n(d),u=s(0),j=function(e){var a=e.sendMessage,s=e.activeDialogId;return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(g.c,{initialValues:{message:""},onSubmit:function(e,i){var t=i.setSubmitting,n=i.resetForm;a(e.message,s),n({values:"",activeDialogId:s}),t(!1)},children:function(e){var a=e.values,s=e.handleChange,i=e.handleSubmit;return Object(u.jsx)(g.b,{onKeyDown:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),i())},children:Object(u.jsxs)("div",{className:m.a.textareaBlock,children:[Object(u.jsx)("textarea",{name:"message",onChange:s,value:a.message,placeholder:"Enter your message",className:m.a.textarea}),Object(u.jsx)("div",{className:m.a.buttonWrapper,children:Object(u.jsx)("input",{onSubmit:i,onKeyDown:onkeydown,type:"submit",value:"Send"})})]})})}})})},b=s(19),h=s(258),p=s.n(h),_=function(e){var a=e.id,s=e.name;return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(b.b,{to:"/dialogs/".concat(a),className:p.a.dialogLink,activeClassName:p.a.active,children:Object(u.jsx)("div",{className:p.a.dialogItem,children:s})})})},v=s(259),x=s.n(v),O=s(47),f=function(e){var a=e.message,s=e.author,i=e.photoMe;return Object(u.jsx)("div",{className:x.a.message,children:0===s.id?Object(u.jsxs)("div",{className:x.a.myMessage,children:[Object(u.jsx)("span",{children:a}),Object(u.jsx)("img",{src:i||O.a,alt:""})]}):Object(u.jsxs)("div",{className:x.a.companionMessage,children:[Object(u.jsx)("img",{src:O.a,alt:""}),Object(u.jsx)("span",{children:a})]})})},D=function(e){var a=e.dialogs,s=e.messages,i=e.sendMessage,t=e.isAuth,n=e.findCompanion,c=e.activeDialogId,o=e.companionName,r=a.map((function(e){return Object(u.jsx)(_,{name:e.name,id:e.id,activeDialogId:e.activeDialogId},e.id)})),g=s.map((function(e){return Object(u.jsx)(f,{message:e.message,id:e.id,author:n(e.authorId)},e.id)}));return t?Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:m.a.dialogs,children:[Object(u.jsx)("div",{className:m.a.dialogsItemsWrapper,children:Object(u.jsx)("div",{className:m.a.dialogsItems,children:r})}),Object(u.jsx)("div",{className:m.a.dialogsBlockWrapper,children:c?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:m.a.messagesHeading,children:[Object(u.jsx)("h4",{children:"Dialog with \xa0"}),Object(u.jsx)("span",{className:m.a.name,children:o})]}),Object(u.jsx)("div",{className:m.a.messagesList,children:g}),Object(u.jsx)("div",{className:m.a.inputBlock,children:Object(u.jsx)(j,{sendMessage:i,activeDialogId:c})})]}):Object(u.jsx)("div",{children:Object(u.jsx)("h4",{children:"Chose the dialog"})})})]})}):Object(u.jsx)(l.a,{to:"/login"})},I=s(1),N=["dialogs","authors","messages","activeDialogId","isAuth","sendMessage","setActiveDialog"];a.default=Object(c.c)(Object(n.b)((function(e){return{dialogs:e.dialogsPage.dialogs,authors:e.dialogsPage.authors,messages:e.dialogsPage.messages,activeDialogId:e.dialogsPage.activeDialogId,isAuth:e.auth.isAuth}}),{sendMessage:r.b,setActiveDialog:r.c}),l.g,o.a)((function(e){var a=e.dialogs,s=e.authors,n=e.messages,c=e.activeDialogId,o=e.isAuth,l=e.sendMessage,r=e.setActiveDialog,g=Object(t.a)(e,N),d=Object(I.useState)(null),m=Object(i.a)(d,2),j=m[0],b=m[1];Object(I.useEffect)((function(){r(j)}),[j]),Object(I.useEffect)((function(){b(Number.parseInt(g.match.params.dialogId)||c)}),[Number.parseInt(g.match.params.dialogId)]);var h=function(e){return s.find((function(a){return a.id===e}))},p=c&&a.find((function(e){return e.id===c})).companions.map((function(e){return h(e)})).map((function(e){return e.name}))[0];return Object(u.jsx)(D,{dialogs:a,messages:n.filter((function(e){return e.dialogId===c})),activeDialogId:c,companionName:p,findCompanion:h,sendMessage:l,isAuth:o})}))}}]);
//# sourceMappingURL=3.3d179abb.chunk.js.map